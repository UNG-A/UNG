#define _CRT_SECURE_NO_WARNINGS

#include<stdio.h> 
#include<stdlib.h> 
#include<string.h>


int	*Make_Skip(char pat[]) { // -> single pointer.

	int size = strlen(pat) / sizeof(pat[0]);
	int* skip = calloc(size, sizeof(int));


	int i = 1;
	int j = 0;
	skip[0] = 0;
	// 1.make skip array
	while (i < size) {

		if (pat[i] == pat[j]) {
			skip[i++] = ++j;
		}

		else {
			j = 0;
			skip[i++] = 0;

		}

	}
	return skip;


}


int KMP(char text[], char pat[])
{
	int size = strlen(pat) / sizeof(pat[0]);

	int* skip = Make_Skip(pat); // pat -> single pointer  but When I put & -> it will be double pointer.

	//
	int pt = 0;
	int pp = 0;
	while (text[pt] != NULL && pat[pp] != NULL) {

		if (pat[pp] == text[pt])
		{
			pp++;
			pt++;
		}

		else if(pp==0) {
			pt++;
		}
		else {
			pp = skip[pp];

		}

	}

	if (pat[pp] == NULL) {

		return pt - pp;

	}

	else {
		return -1;
	}






	/*
	for (int i = 0; i < size; i++) {
		printf("%d", *(skip+i));
	}

	*/
}






int main() {

	char text[] = "ABCABABCABD";
	char pattern[] = "ABCABD";


	

	printf("%d",KMP(&text, &pattern));
	

}
